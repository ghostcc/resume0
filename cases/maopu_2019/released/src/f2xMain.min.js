annie._isReleased=1549856893634;function playSound(n,e){try{e?$(n)[0].currentTime=0:0,$(n)[0].play()}catch(t){}}function initHome(){showPop(-1),console.log(mainSwf),mainSwf.homeMc.startBtn.addEventListener(annie.MouseEvent.CLICK,function(){console.log("sss"),mainSwf.gotoAndStop("game"),initGame(),playSound(".bksound"),_hmt.push(["_trackEvent","home","startBtn","CLICK"])}),playSound(".bksound"),mainSwf.homeMc.btnRule.addEventListener(annie.MouseEvent.CLICK,function(){showPop("rule")}),mainSwf.homeMc.btnTop.addEventListener(annie.MouseEvent.CLICK,function(){showPop("top"),service("service/index.php?action=getTopList",{}).then(function(n){for(var e=n.list||[],t=0;t<5;t++){var i=e[t]||{};mainSwf.popup.topMc["item"+t].text=i.uname||"",mainSwf.popup.topMc["score"+t].text=i.score||""}});var n=jsonDatas();mainSwf.popup.topMc.item5.text=n.uname||"我",mainSwf.popup.topMc.score5.text=n.score||"0",mainSwf.popup.topMc.rank.text=n.rank||"10000",mainSwf.popup.topMc.day.text=0,mainSwf.popup.topMc.hour.text=0,mainSwf.popup.topMc.min.text=0,mainSwf.popup.topMc.sec.text=0}),mainSwf.popup.ruleMc.addEventListener(annie.MouseEvent.CLICK,function(){showPop(-1)}),mainSwf.popup.topMc.addEventListener(annie.MouseEvent.CLICK,function(){showPop(-1)})}function showPop(n){n==-1?(mainSwf.popup.visible=!1,mainSwf.popup.gotoAndStop(1),clearInterval(toplistInterval)):(mainSwf.popup.visible=!0,mainSwf.popup.alpha=0,TweenMax.to(mainSwf.popup,.8,{alpha:1}),mainSwf.popup.gotoAndStop(n))}function initEnd(n){mainSwf.gotoAndStop("end"),mainSwf.endMc.scoreTf.text=n;var e=n<2e3?1:n<2400?2:3;mainSwf.endMc.stars.gotoAndStop(e);var t=jsonDatas();if(mainSwf.endMc.nameInput.text=t.uname||"",mainSwf.endMc.mobileInput.text=t.mobile||"",mainSwf.endMc.nameInput.visible=mainSwf.endMc.mobileInput.visible=!0,$("mainSwf.endMc.mobileInput.htmlElement,   mainSwf.endMc.nameInput.htmlElement").blur(function(){setTimeout(function(){var n=document.documentElement.scrollTop||document.body.scrollTop||0;window.scrollTo(0,Math.max(n-1,0)),alert("sss")},100)}),1!=mainSwf.endMc.inited){mainSwf.endMc.inited=!0,$(mainSwf.endMc.mobileInput.htmlElement).attr({maxlength:"11",type:"number"});var i=!1;mainSwf.endMc.submitBtn.addEventListener(annie.MouseEvent.CLICK,function(){11==mainSwf.endMc.mobileInput.text.length&&parseInt(""+mainSwf.endMc.mobileInput.text)==mainSwf.endMc.mobileInput.text||alert("请输入正确的手机号"),0==mainSwf.endMc.nameInput.text.length&&alert("请输入正确的您的姓名"),i||(i=!0,sservice("service/index.php?action=saveScore",{uname:mainSwf.endMc.nameInput.text,mobile:mainSwf.endMc.mobileInput.text,score:n}).then(function(n){i=!1,console.log(n),0==n.code&&(mainSwf.endMc.nameInput.visible=!1,mainSwf.endMc.mobileInput.visible=!1,showPrize(n.prize))}))})}}function showPrize(n){showPop("prize"+n),initPrize0(),initPrize1(),initPrize2()}function initPrize0(){1!=mainSwf.popup.prize0Mc.hasInited&&(mainSwf.popup.prize0Mc.hasInited=!0,mainSwf.popup.prize0Mc.shareBtn.addEventListener(annie.MouseEvent.CLICK,function(){goShare()}))}function initPrize2(){1!=mainSwf.popup.prize2Mc.hasInited&&(mainSwf.popup.prize2Mc.hasInited=!0,mainSwf.popup.prize2Mc.shareBtn.addEventListener(annie.MouseEvent.CLICK,function(){goShare()}))}function initPrize1(){1!=mainSwf.popup.prize1Mc.hasInited&&(mainSwf.popup.prize1Mc.hasInited=!0,mainSwf.popup.prize1Mc.shareBtn.addEventListener(annie.MouseEvent.CLICK,function(){return""==mainSwf.popup.prize1Mc.addressTF.text?void alert("请输入收货地址吧"):(service("service/index.php?action=address",{address:mainSwf.popup.prize1Mc.addressTF.text}).then(function(n){0==n.code&&alert("收货地址更新")}),void goShare())}))}function goShare(){var n=jsonDatas().uname;$(".shareImg .share").attr("src","http://event.toutiaocloud.com/maopu/2019maopuGame/service/img.php?input="+n),$(".shareImg").show(),_hmt.push(["_trackEvent","share","share","show"])}function initGame(){function n(n){var e=0;e=n.currentTarget==m.btns.btn0?-1:1,TweenMax.killTweensOf(n.currentTarget),n.currentTarget.alpha=1,TweenMax.to(n.currentTarget,.6,{alpha:.3}),S+=e,S=Math.min(Math.max(S,0),2),m.pigMc.x=[72,372,672][S],u+=.5}function e(){TweenMax.to(m.btns.btn0,1,{alpha:.3}),TweenMax.to(m.btns.btn1,1,{alpha:.3}),m.pigMc.play(),setTimeout(t,3e3),m.startAni.gotoAndPlay(2),m.startAni.visible=!0,o()}function t(){m.btns.btn0.addEventListener(annie.MouseEvent.CLICK,n),m.btns.btn1.addEventListener(annie.MouseEvent.CLICK,n),m.addEventListener(annie.Event.ENTER_FRAME,a),c=setInterval(o,1e3)}function i(e){m.btns.btn0.removeEventListener(annie.MouseEvent.CLICK,n),m.btns.btn1.removeEventListener(annie.MouseEvent.CLICK,n),m.removeEventListener(annie.Event.ENTER_FRAME,a),clearInterval(c),e&&m.pigMc.gotoAndStop(1),setTimeout(function(){initEnd(M)},1e3)}function a(n){d+=u;var e=h.y-g[0][1];if(e>f){if(b.length>0)var t=h=b.pop();else t=h=new main.ItemMC,console.log("new item");p(t),m.itemsContainer.addChildAt(t,0),f-=10,f=Math.max(f,200)}for(var i=m.itemsContainer.children.length-1;i>=0;i--)t=m.itemsContainer.getChildAt(i),r(t),t.y+=u*(t.percent/2+1),s(t);m.scoreMc.scoreTf.text=M=Math.floor(d/20)+l}function o(){0==w&&i(),trace(w),m.barMC.percent.scaleX=w/v,m.barMC.leftNum.text=w+"s",w--}function p(n){var e=n.track=Math.floor(3*Math.random()),t=n.frame=Math.floor(5*Math.random()+1);n.gotoAndStop(t),n.isDie=!1,n.x=g[e][0],n.y=g[e][1],r(n)}function r(n){var e=n.track,t=n.percent=(n.y-g[e][1])/E[e][1];n.x=g[e][0]+E[e][0]*t,n.scaleX=n.scaleY=t+.5,n.y<350?n.visible=!1:(n.visible=!0,n.y>1030&&(n.parent.removeChild(n),b.push(n)))}function s(n){if(!n.isDie&&n.y>m.pigMc.y-50&&Math.abs(n.y-m.pigMc.y)<50&&Math.abs(n.x-m.pigMc.x)<50){var e=n.frame;if(n.isDie=!0,poolflag.length)var t=poolflag.pop();else{console.log("new Info");var t=new main.InfoMC;t.addFrameScript(14,function(){this.stop(),window.poolflag.push(this),this.parent.removeChild(this)}.bind(t))}t.gotoAndPlay(1),t.x=m.pigMc.x,t.y=m.pigMc.y,t.flag.gotoAndStop(e),m.addChild(t),1==e?(i(!0),playSound(".boom",!0)):(l+=[,,10,20,30,50][e],playSound(".score",!0))}}var c,m=mainSwf.gameMc,u=10,d=0,f=500,l=0,M=0,w=60,v=60,h={y:1e4},S=1,g=[[300,350],[372,350],[444,350]],E=[[-250,681],[0,681],[246,681]],b=[];e()}window.A2xExtend=__extends;var stage,mainSwf,poolflag=[];window.addEventListener("load",function(){annie.debug=!1;var n=document.createElement("canvas"),e=n.getContext("webgl");stage=new annie.Stage("annieEngine",750,1208,28,annie.StageScaleMode.FIXED_WIDTH,e?1:0),stage.addEventListener(annie.Event.ON_INIT_STAGE,function(n){annie.loadScene("main",function(n){trace("加载进度:"+n+"%"),$(".loading .num").text(n+"%")},function(n){serviceuu(),n.sceneId==n.sceneTotal&&($(".loading").remove(),mainSwf=new main.Main,stage.addChild(mainSwf),setTimeout(initHome,300))})})}),$(".backBtn").click(function(){location.href=location.href});var toplistInterval=-1;